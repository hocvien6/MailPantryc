#include <stdio.h>
#include <stdlib.h>

#include <zlib.h>

#define OUTPUT_BUF_SIZE 1024

int main(int argc, char** argv) {
    unsigned char output_buffer[1024];

    char compressed_data[] = {
        0x50,0x4b ,0x03,0x04 ,0x14,0x03 ,0x00,0x00 ,0x08,0x00 ,0x81,0xbe ,0xf9,0x44 ,0x08,0xe5
,0x30,0x7b ,0x1b,0x00 ,0x00,0x00 ,0x21,0x00 ,0x00,0x00 ,0x06,0x00 ,0x00,0x00 ,0x6c,0x31
,0x2e,0x74 ,0x78,0x74 ,0x73,0x4a ,0x4c,0xaa ,0xd4,0x51 ,0xc8,0xcb ,0x4f,0xca ,0x4f,0x81
,0xd3,0x7a ,0x7a,0x7a ,0x0a,0xa5 ,0x79,0x25 ,0x99,0x39 ,0x0a,0x95 ,0xf9,0xa5 ,0x00,0x50
,0x4b,0x03 ,0x04,0x0a ,0x03,0x00 ,0x00,0x00 ,0x00,0x8d ,0xbe,0xf9 ,0x44,0x3a ,0x12,0xb3
,0x96,0x1b ,0x00,0x00 ,0x00,0x1b ,0x00,0x00 ,0x00,0x06 ,0x00,0x00 ,0x00,0x6c ,0x32,0x2e
,0x64,0x6f ,0x63,0x57 ,0x68,0x65 ,0x6e,0x20 ,0x79,0x6f ,0x75,0x20 ,0x73,0x61 ,0x79,0x20
,0x6e,0x6f ,0x74,0x68 ,0x69,0x6e ,0x67,0x20 ,0x61,0x74 ,0x20,0x61 ,0x6c,0x6c ,0x50,0x4b
,0x01,0x02 ,0x3f,0x03 ,0x14,0x03 ,0x00,0x00 ,0x08,0x00 ,0x81,0xbe ,0xf94,0x4 ,0x08,0xe5
,0x30,0x7b ,0x1b,0x00 ,0x00,0x00 ,0x21,0x00 ,0x00,0x00 ,0x06,0x00 ,0x00,0x00 ,0x00,0x00
,0x00,0x00 ,0x00,0x00 ,0x20,0x80 ,0xb4,0x81 ,0x00,0x00 ,0x00,0x00 ,0x6c,0x31 ,0x2e,0x74
,0x78,0x74 ,0x50,0x4b ,0x01,0x02 ,0x3f,0x03 ,0x0a,0x03 ,0x00,0x00 ,0x00,0x00 ,0x8d,0xbe
,0xf9,0x44 ,0x3a,0x12 ,0xb3,0x96 ,0x1b,0x00 ,0x00,0x00 ,0x1b,0x00 ,0x00,0x00 ,0x06,0x00
,0x00,0x00 ,0x00,0x00 ,0x00,0x00 ,0x00,0x00 ,0x20,0x80 ,0xb4,0x81 ,0x3f,0x00 ,0x00,0x00
,0x6c,0x32 ,0x2e,0x64 ,0x6f,0x63 ,0x50,0x4b ,0x05,0x06 ,0x00,0x00 ,0x00,0x00 ,0x02,0x00
,0x02,0x00 ,0x68,0x00 ,0x00,0x00 ,0x7e,0x00 ,0x00,0x00 ,0x00,0x00};

    z_stream strm;

    strm.zalloc = Z_NULL;
    strm.zfree = Z_NULL;
    strm.opaque = Z_NULL;
    strm.avail_in = 35;
    strm.next_in = compressed_data;


    int ret = inflateInit2(&strm, 15+32);
    if (ret != Z_OK) {
        printf("inflateInit2 failed\n");
        return 1;
    }
    printf("inflateInit2 is Z_OK\n");

    strm.avail_out = OUTPUT_BUF_SIZE;
    strm.next_out = output_buffer;
    ret = inflate(&strm, Z_NO_FLUSH);
    if (ret != Z_STREAM_END) {
        printf("inflate returned an error: %d\n", ret);
        printf("Error: %s\n", strm.msg);
        return 1;
    } 
    printf("Decompressed the following data:\n");
    printf("-->%s<--\n", output_buffer);

    inflateEnd(&strm);

    return 0;
}